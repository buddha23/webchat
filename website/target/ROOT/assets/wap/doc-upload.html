<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
<link rel="stylesheet" type="text/css" href="../css/public.css">
<link rel="stylesheet" type="text/css" href="../css/style_mobile.css">
<script type="text/javascript" src="../js/min/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="../js/app.js"></script>
<title></title>
<script>
$(function(){
	$('.doc-upload .doc-upload-btn').click(function(){
		$('.doc-upload .doc-file').click();
	})

	$(document).on('change', '.doc-upload .doc-file', function () {
		$('.doc-upload').hide();
		$('.doc-progress').show();

		//测试
		setInterval((function(){
			progress.addWidth();
			if(progress.getProWidth() <= 100){
				$('.upload-progress .progress-bar .progress').css({
					'width' : progress.getProWidth() + '%'
				});
				$('.upload-progress .progress-value').text(
					progress.getProWidth() + "%"
				)
				if(progress.getProWidth() == 100){
					$('.doc-progress .doc-upload-tips').text('上传成功！');
					setTimeout(function(){
						$('.doc-progress').hide();
						$('.doc-form').show();
					}, 750);
				}
			}
		}),250);
	})

	var progress= (function(){
		var width = 0;
		return{
			getProWidth: function(){
				return width;
			},
			addWidth: function(){
				(width < 100) ? width++ : width;
			}
		}
	}());
})
</script>
</head>

<body>
<div class="container">
	<header>
    	<div class="menu-left">
	    		<a id="prevPage" class="menu-item" href="javascript:history.back()"><i class="fa fa-chevron-left"></i></a>
	        </div>

	        <div class="menu-right">
	    		<a class="menu-item menu-user" href="index.html#usercenter" onclick="location.reload()"></a>
	        </div>

	    	<div class="title">文档上传</div>
    </header>

    <div class="content clearfix">
        <div class="page-doc-upload">
        	<div class="doc-upload">
                <div class="doc-upload-btn">
                    <i class="fa fa-upload"></i> 上传文档
                </div>
                <div class="doc-upload-tips">
                    从我的电脑选择要上传的文档，通过审核后便可供他人下载
                </div>
                <input class="doc-file" style="display: none;" type="file" accept="application/msword,application/vnd.ms-excel,application/pdf,text/plain,application/vnd.ms-powerpoint">
            </div>

            <div class="doc-progress">
                <div class="upload-progress">
                    <div class="progress-value"></div>
                    <div class="progress-bar">
                        <div class="progress green"></div>
                    </div>
                </div>
                <div class="doc-upload-tips">
                    文件上传中，请耐心等待...
                </div>
            </div>

            <form style="display:none;" class="page-form-wap doc-form" action="#" method="post">
                <div class="row margintop0">
                    <label for=""></label>
                    <div class="field">
                        <i class="fa fa-check-circle color-blue"></i> 文档上传成功，请完善文档信息！
                    </div>
                </div>
                <div class="row">
                    <label for="">标题：</label>
                    <div class="field">
                        <input class="ui-input-default input-full" type="text" />
                    </div>
                </div>
                <div class="row">
                    <label for="">积分售价：</label>
                    <div class="field">
                        <input class="ui-input-default input-full" type="text" />
                    </div>
                </div>
                <div class="row">
                    <label for="">上传到分类：</label>
                    <div class="field">
                        <select class="ui-input-default input-full">
                            <option>西门子</option>
                            <option>发那科</option>
                            <option>三菱数控</option>
                            <option>山崎马扎克</option>
                            <option>北京精雕</option>
                            <option>新代数控</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <label for="">简介：</label>
                    <div class="field">
                        <textarea class="ui-textarea-default input-full"></textarea>
                    </div>
                </div>
                <div class="row">
                    <label></label>
                    <div class="field">
                        <button class="button btn-green btn-large input-full" type="submit">确定</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <footer>

    </footer>
</div>
</body>
</html>
